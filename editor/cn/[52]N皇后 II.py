# n çš‡åé—®é¢˜ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚ 
# 
#  
# 
#  ä¸Šå›¾ä¸º 8 çš‡åé—®é¢˜çš„ä¸€ç§è§£æ³•ã€‚ 
# 
#  ç»™å®šä¸€ä¸ªæ•´æ•° nï¼Œè¿”å› n çš‡åä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚ 
# 
#  ç¤ºä¾‹: 
# 
#  è¾“å…¥: 4
# è¾“å‡º: 2
# è§£é‡Š: 4 çš‡åé—®é¢˜å­˜åœ¨å¦‚ä¸‹ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
# [
# Â [".Q..", Â // è§£æ³• 1
# Â  "...Q",
# Â  "Q...",
# Â  "..Q."],
# 
# Â ["..Q.", Â // è§£æ³• 2
# Â  "Q...",
# Â  "...Q",
# Â  ".Q.."]
# ]
#  
# 
#  
# 
#  æç¤ºï¼š 
# 
#  
#  çš‡åï¼Œæ˜¯å›½é™…è±¡æ£‹ä¸­çš„æ£‹å­ï¼Œæ„å‘³ç€å›½ç‹çš„å¦»å­ã€‚çš‡ååªåšä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯â€œåƒå­â€ã€‚å½“å¥¹é‡è§å¯ä»¥åƒçš„æ£‹å­æ—¶ï¼Œå°±è¿…é€Ÿå†²ä¸Šå»åƒæ‰æ£‹å­ã€‚å½“ç„¶ï¼Œå¥¹æ¨ªã€ç«–ã€æ–œéƒ½å¯èµ°ä¸€æˆ– N
# -1 æ­¥ï¼Œå¯è¿›å¯é€€ã€‚ï¼ˆå¼•ç”¨è‡ª ç™¾åº¦ç™¾ç§‘ - çš‡å ï¼‰ 
#  
#  Related Topics å›æº¯ç®—æ³• 
#  ğŸ‘ 178 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    # æ€è·¯1ï¼š
    # - æŒ‡å®šä¸€ä¸ªn*n çš„çŸ©é˜µ
    # - é€‰å®šä¸€ä¸ªç‚¹(i,j)åï¼Œå»é™¤çŸ©é˜µä¸­(i, j) ä»¥åŠä»¥ä¸‹ç‚¹ï¼š
    # -     åŒä¸€åˆ—ï¼š (i, *)
    # -     åŒä¸€è¡Œï¼š (*, j)
    # -     å·¦æ–œï¼š (i-k, j+k) k=1,2,3...  i-k>=0, j+k<n
    # -     å³æ–œï¼š (i+k, j-k) k=1,2,3...  i+k<n, j-k>=0
    # - é€‰å–ä¸‹ä¸€ä¸ªç‚¹ï¼Œé‡å¤ä¸Šé¢æ­¥éª¤
    # - å¯é€‰ç‚¹ä¸º0ä¸”é€‰å–çš„ç‚¹<næ—¶ï¼Œä¸ºå¤±è´¥æ–¹æ¡ˆï¼›é€‰å–ç‚¹è¾¾åˆ°8ä¸ªæ—¶ï¼Œè®°ä½œä¸€æ¬¡æˆåŠŸ

    # æ€è·¯2(å‚è€ƒå®˜æ–¹æ–¹æ³•):
    # - å·¦æ–œï¼š i+jçš„å€¼æ—¶ä¸€æ ·çš„ï¼›å³æ–œï¼š ç›¸å‡çš„å€¼æ—¶ä¸€æ ·çš„
    # - ç”¨é›†åˆæ¥åˆ†åˆ«å­˜å‚¨ï¼Œå·²é€‰ç‚¹çš„åˆ—å· jï¼Œ å·²é€‰ç‚¹å·¦æ–œæ–¹å‘ä¹‹å’Œi+jï¼Œ å·²é€‰ç‚¹å³æ–œæ–¹å‘ä¹‹å·® i-j
    # - ä»ä¸Šå¾€ä¸‹éå†ï¼Œå¹¶åˆ¤æ–­ç‚¹å¯¹åº”çš„å€¼æ˜¯å¦å­˜åœ¨äºä¸‰ä¸ªé›†åˆä¸­

    def totalNQueens(self, n: int) -> int:
        def get_count(line_index: int) -> int:
            # ç»“æŸé€’å½’æ¡ä»¶ï¼šé€’å½’å®Œæœ€åä¸€è¡Œæ—¶
            if line_index == n:
                return 1
            count = 0
            for columns_index in range(n):
                # å½“åˆ¤æ–­å½“å‰ç‚¹ä½ä¸å¯é€‰æ—¶ï¼Œè·³åˆ°ä¸‹ä¸€ä¸ªç‚¹
                if columns_index in columns or line_index + columns_index in diagonal_sum or line_index - columns_index in diagonal_diff:
                    continue
                # å½“å‰ç‚¹ä½å¯ä½¿ç”¨ï¼Œå°†è¯¥ç‚¹ä½ç›¸å…³æ·»åŠ çš„é›†åˆä¸­
                columns.add(columns_index)
                diagonal_sum.add(line_index + columns_index)
                diagonal_diff.add(line_index - columns_index)
                count += get_count(line_index + 1)
                # ä¸‰ä¸ªé›†åˆéœ€è¦æ¢å¤åˆ°æ­¤é€’å½’å‰çŠ¶æ€ï¼Œä¾¿äºä¸‹æ¬¡çš„forå¾ªç¯
                columns.remove(columns_index)
                diagonal_sum.remove(line_index + columns_index)
                diagonal_diff.remove(line_index - columns_index)
            return count

        columns = set()
        diagonal_sum = set()
        diagonal_diff = set()
        return get_count(0)
# leetcode submit region end(Prohibit modification and deletion)
